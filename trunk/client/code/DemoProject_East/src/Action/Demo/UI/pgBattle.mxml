<?xml version="1.0" encoding="utf-8"?>
<s:BorderContainer xmlns:fx="http://ns.adobe.com/mxml/2009"
				   xmlns:s="library://ns.adobe.com/flex/spark" implements="Action.Core.Page.IGamePage"
				   xmlns:mx="library://ns.adobe.com/flex/mx" width="760" height="600" backgroundColor="#000000">
	<fx:Declarations>
		<!-- 将非可视元素（例如服务、值对象）放在此处 -->
	</fx:Declarations>
	<fx:Script>
		<![CDATA[
			import Action.Core.Flow.Workflow;
			import Action.Resource.Flow.LoadImageActivity;
			import Action.Resource.ResourceManager;
			
			import mx.controls.Alert;
			
			private const _bgUrl:String = "battle/001.JPG";
						
			public function onLoad():void
			{
				//加载背景
				var workflow:Workflow = Workflow.create([new LoadImageActivity(_bgUrl)]);
				workflow.addEventListener(Event.COMPLETE, onWorkflowFinished);
				workflow.goon();
				
				//生成网格
				for(var i:int = 0; i<5; i++)
				{
					for(var j:int = 0; j<12; j++)
					{
						var cell:BorderContainer = new BorderContainer();
						cell.setStyle("borderWeight", 1);
						cell.setStyle("backgroundAlpha", 0);
						cell.setStyle("borderColor", "#00ffff");
						cell.width = cell.height = 50;
						cell.x = j * 50;
						cell.y = i * 50;
						_bcGrid.addElement(cell);
					}
				}
			}
			
			public function onUnload():void
			{
				
			}
			
			private function onWorkflowFinished(e:Event):void
			{
				_bcMain.setStyle("backgroundImage", ResourceManager.get(_bgUrl));
			}			
			
			protected function _lblGrid_clickHandler(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				_lblGrid.text = (_bcGrid.visible = !_bcGrid.visible) ? "隐藏网格" : "显示网格";
			}
			
		]]>
	</fx:Script>
	<s:Label id="_lblPlayer1" x="50" y="40" color="#ffff00" fontFamily="微软雅黑" fontSize="28"
			 fontWeight="bold" text=" 神仙一枝花"  buttonMode="true"/>
	<s:Label id="_lblVS" x="350" y="40" color="#00ff00" fontFamily="微软雅黑" fontSize="28"
			 fontWeight="bold" text=" VS " />
	<s:Label id="_lblPlayer2" x="550" y="40" color="#ffff00" fontFamily="微软雅黑" fontSize="28"
			 fontWeight="bold" text="万寿落雪"  buttonMode="true"/>
	<s:BorderContainer id="_bcMain" y="100" width="100%" height="400" useHandCursor="false">
		<s:BorderContainer id="_bcGrid" width="600" height="250" borderColor="#0000ff" borderWeight="0"
						   backgroundAlpha="0" x="80" y="75" visible="false">			
		</s:BorderContainer>
	</s:BorderContainer>
	<s:Label id="_lblGrid" x="490" y="540" color="#ff8800" fontFamily="华文楷体" fontSize="28"
			 fontWeight="bold" text="显示网格" buttonMode="true" click="_lblGrid_clickHandler(event)"/>
	<s:Label id="_lblPlay" x="620" y="540" color="#ff8800" fontFamily="华文楷体" fontSize="28"
			 fontWeight="bold" text="加速播放" buttonMode="true"/>
</s:BorderContainer>
